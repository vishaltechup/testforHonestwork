<!-- <div class="container-fluid">
    <app-statistics></app-statistics> -->
<section class="pt-5">
    <div class="md:flex">
        <div class="md:w-full">
            <div class="project-banner">
                <div class="pt-4">
                    <app-tabs></app-tabs>
                    <section aria-labelledby="tab5-label">
                        <div class="p-4">
                            <div class="lg:flex">

                                <div class="lg:w-1/2 pr-4 full-border-right">
                                    <span class="font-size-14 child-text-color font-bold child-text-color">
                                        Project Scope
                                    </span>
                                    <form [formGroup]="projectscope" method="post">
                                        <div class="project-box p-3 mt-3"
                                            style="background: #f9f2f2;border: 1px solid #cccccc;border-radius: 7px;">

                                            <ckeditor name="scopeDescription" formControlName="scopeDescription"
                                                [config]="{uiColor: '#4400cc'}" [readonly]="!Scopeedit" debounce="500"
                                                required>
                                            </ckeditor>

                                            <!-- <textarea class="input-form-control" name="scopeDescription"   formControlName="scopeDescription"
                                                style="background: #f9f2f2;border: none;margin-top: 0px; margin-bottom: 0px; height: 169px;">Lorem Ipsum is simply dummy text of the printing and typesetting                                                   
                                            </textarea> -->

                                            <div class="flex justify-end mt-4">
                                                <div style="background: #4400cc; padding: 6px;border-radius: 5px;"
                                                    class="add-task font-size-18 cursor-pointer flex items-center justify-center"
                                                    (click)="editprojectscopedetails()"
                                                    *ngIf="permissions.newproject.canView && !Scopeedit">
                                                    <i class="fas fa-pen white-icon-color"></i>
                                                </div>
                                                <div style="background: #4400cc; padding: 6px;border-radius: 5px;"
                                                    class="add-task font-size-18 cursor-pointer flex items-center justify-center"
                                                    (click)="updateprojectscopedetails()"
                                                    *ngIf="permissions.newproject.canView && Scopeedit">
                                                    <i class="fas fa-save white-icon-color"></i>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="md:flex mt-4 md:flex-wrap">
                                            <div class="md:w-1/2 mb-4 md:pr-3" *ngIf="permissions.qoutetobuild.canView">
                                                <p
                                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                    Quote To Build
                                                </p>
                                                <div
                                                    class="relative flex w-full flex-wrap items-stretch mb-3 dashboard-box normal-shadow">

                                                    <input type="text" id="notes-input" [readonly]="!BuildQuoteedit"
                                                        placeholder="Write Something..." name="buildQuoteAmount"
                                                        formControlName="buildQuoteAmount" placeholder="$9,000,000.00"
                                                        mask="0*.00" maxlength="11"
                                                        class="px-3 py-3 block input-form-control w-full pr-10">


                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="editbuildQuoteAmount()" *ngIf="!BuildQuoteedit"
                                                        style="width: 20%;padding: 13px 8px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-pen white-icon-color"></i>
                                                    </span>

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="updateprojectscopedetails()" *ngIf="BuildQuoteedit"
                                                        style="width: 20%;padding: 13px 8px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-save white-icon-color"></i>
                                                    </span>

                                                </div>

                                            </div>
                                            <div class="md:w-1/2 mb-4" *ngIf="permissions.qoutetobuild.canView">
                                                <p
                                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                    Partner Quoted
                                                </p>
                                                <div
                                                    class="relative flex w-full flex-wrap items-stretch mb-3 dashboard-box normal-shadow">

                                                    <input type="text" id="notes-input" placeholder="Write Something..."
                                                        name="partnerQuotedAmount" formControlName="partnerQuotedAmount"
                                                        placeholder="$7,000,000.00" mask="0*.00" maxlength="11"
                                                        [readonly]="!PartnerQuotededit"
                                                        class="px-3 py-3 block input-form-control w-full pr-10">

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="editPartnerQuoted()" *ngIf="!PartnerQuotededit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-pen white-icon-color"></i>
                                                    </span>

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="updateprojectscopedetails()" *ngIf="PartnerQuotededit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-save white-icon-color"></i>
                                                    </span>

                                                </div>

                                            </div>
                                            <!-- <div class="md:w-1/2 mb-4 pr-3"
                                                *ngIf="permissions.qoutetobuild.canView">
                                                <p
                                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                    Total Amount Recievable
                                                </p>
                                                <div
                                                    class="relative flex w-full flex-wrap items-stretch mb-3 dashboard-box normal-shadow">

                                                    <input type="text" id="notes-input"
                                                        placeholder="Write Something..."
                                                        name="totalAmountsReceivable"
                                                        formControlName="totalAmountsReceivable"
                                                        placeholder="$7,000,000.00" mask="0*.00" maxlength="11"
                                                        [readonly]="!totalAmountsReceivableedit"
                                                        class="px-3 py-3 block input-form-control w-full pr-10">

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="edittotalAmountsReceivable()"
                                                        *ngIf="!totalAmountsReceivableedit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-pen white-icon-color"></i>
                                                    </span>

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="updateprojectscopedetails()"
                                                        *ngIf="totalAmountsReceivableedit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-save white-icon-color"></i>
                                                    </span>

                                                </div>

                                            </div>
                                            <div class="md:w-1/2 mb-4 pr-3"
                                                *ngIf="permissions.qoutetobuild.canView">
                                                <p
                                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                    Total Amount Owed
                                                </p>
                                                <div
                                                    class="relative flex w-full flex-wrap items-stretch mb-3 dashboard-box normal-shadow">

                                                    <input type="text" id="notes-input"
                                                        placeholder="Write Something..." name="totalAmountsOwed"
                                                        formControlName="totalAmountsOwed"
                                                        placeholder="$7,000,000.00" mask="0*.00" maxlength="11"
                                                        [readonly]="!totalAmountsOwededit"
                                                        class="px-3 py-3 block input-form-control w-full pr-10">

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="edittotalAmountsOwed()"
                                                        *ngIf="!totalAmountsOwededit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-pen white-icon-color"></i>
                                                    </span>

                                                    <span
                                                        class="z-10 h-full leading-snug font-normal absolute text-center text-gray-400 absolute bg-transparent
                                                    rounded text-base items-center justify-center w-8 right-0 pr-3 py-3"
                                                        (click)="updateprojectscopedetails()"
                                                        *ngIf="totalAmountsOwededit"
                                                        style="width: 15%;padding: 10px 5px;color: #fff;background: #4400cc;cursor: pointer;border-radius: 8px;z-index:0;">
                                                        <i class="fas fa-save white-icon-color"></i>
                                                    </span>

                                                </div>

                                            </div> -->
                                            <!-- <div class="md:w-1/2 mb-4 pl-3 m-pl-0" *ngIf="permissions.partnerquoted.canView">
                                                <p
                                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                    Partner Quoted
                                                </p>
                                                <input class="block input-form-control" type="text"  mask="0*.00"  maxlength="11" 
                                                    placeholder="$7,000,000.00"  name="partnerQuotedAmount"   formControlName="partnerQuotedAmount" />
                                            </div> -->

                                        </div>
                                    </form>
                                    <div class="md:flex mt-4 md:flex-wrap">
                                        <div class="md:w-1/2 mb-4 md:pr-3">
                                            <p class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                                Tech stack
                                            </p>
                                            <form [formGroup]="projectscopeForm" method="post">
                                                <ng-multiselect-dropdown [placeholder]="'Select Tech Stack'"
                                                    [settings]="dropdownSettings" [data]="TechstackList"
                                                    [(ngModel)]="selectedItems" name="Techstack"
                                                    formControlName="Techstack" (onSelect)="onItemSelect($event)"
                                                    (onSelectAll)="onSelectAll($event)">
                                                </ng-multiselect-dropdown>
                                            </form>

                                        </div>
                                        <div class="md:w-1/2 mb-4">
                                            <div class="mt-5 flex items-center">

                                                <button *ngIf="permissions.techstackupdate.canView"
                                                    (click)="InsertUpdateTeckStack()"
                                                    class="mt-3 new-project-btn primary-btn font-size-16 primary-btn-text-color font-medium tracking-normal text-center">
                                                    Update
                                                </button>
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <div class="lg:w-1/2 pl-4" *ngIf="permissions.agencyview.canView">
                                    <div class="md:flex">
                                        <div class="md:w-full">
                                            <div class="flex items-center justify-between">
                                                <span
                                                    class="font-size-14 tracking-normal cursor-pointer font-medium child-text-color">
                                                    Scope Documents
                                                </span>
                                                <p (click)="htmlAddModal.show();openModal()" style="cursor: pointer;"
                                                    class="font-size-14 tracking-normal link-text-color font-bold mb-0">
                                                    + Upload Document
                                                </p>
                                            </div>
                                            <div class="worker-table mt-3">
                                                <table class="worker-data" style="WIDTH: 100%;">
                                                    <tr>
                                                        <th class="text-left">Name</th>
                                                        <th class="text-left">Date / Time</th>
                                                        <th class="text-left">Uploaded By</th>
                                                        <th class="text-right"></th>
                                                    </tr>
                                                    <tbody
                                                        *ngIf="scopeDocumentDetailList && scopeDocumentDetailList.length > 0">
                                                        <tr *ngFor="let scope of scopeDocumentDetailList">
                                                            <td>
                                                                <div class="flex items-center">
                                                                    <i class="far fa-file-image child-text-color"></i>
                                                                    <span
                                                                        class="pl-3 font-medium heading-title-text-color font-size-14">
                                                                        {{scope.name}} </span>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <span
                                                                    class="font-medium heading-title-text-color font-size-14">
                                                                    {{scope.dateTime}}</span>
                                                            </td>
                                                            <td>
                                                                <span
                                                                    class="font-medium heading-title-text-color font-size-14">
                                                                    {{scope.uploadedBy}}
                                                                </span>
                                                            </td>
                                                            <td class="text-left">
                                                                <div class="">
                                                                    <p class="font-medium danger-text-color underline font-size-14"
                                                                        (click)="removeScopeDocumentFile(scope.id)"
                                                                        style="cursor: pointer;">Remove File</p>
                                                                    <a class="font-medium danger-text-color underline font-size-14"
                                                                        style="cursor: pointer;"
                                                                        (click)="downloadFile(scope.filePath)">
                                                                        Download File</a>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- </div> -->



<!--Model Start Here-->
<div bsModal [config]="{backdrop: 'static',  keyboard: false}" class="modal fade" #htmlAddModal="bs-modal" tabindex="-1"
    role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-toggle="modal"
    data-target="#exampleModalScrollable">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">

            <form [formGroup]="projectscopeFormDocument" method="post" class="form-horizontal">

                <div class="modal-header">
                    <h4 class="modal-title"><b>Scope Documents</b></h4>
                    <button type="button" class="close" (click)="htmlAddModal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <div class="col col-md-12">
                        <div class="lg:flex">

                            <div class="md:w-full">
                                <label for="project-Name"
                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">
                                    Name<span style="color: red;margin-left: 2px;font-weight: bold;">*</span></label>


                                <input class="input-form-control" style="width: 100%;" formControlName="dFilename"
                                    type="text" placeholder="Enter file name" />

                                <p class="error-text"
                                    *ngIf="submitAttempt && projectscopeFormDocument.controls.dFilename.errors?.required">
                                    Name is required
                                </p>

                            </div>

                        </div>
                        <div class="lg:flex">

                            <div class="md:w-full mb-5">
                                <label for="project-Name"
                                    class="font-size-14 mb-2 tracking-normal font-bold input-label-color">File</label>
                                <div class="flex items-center m-block">
                                    <div class="pr-5 m-pr-0">
                                        <input #fileInput type="file" id="file-input" name="file-input" accept="image/*"
                                            class="form-control-file" (change)="readUrl($event)">
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button"
                            class="new-project-btn primary-btn font-size-18 primary-btn-text-color font-medium tracking-normal text-center"
                            (click)="htmlAddModal.hide()" aria-label="Close">Cancel</button>
                        <button type="button" (click)="uploadscopeDocuemntfile();"
                            class="new-project-btn primary-btn font-size-18 primary-btn-text-color font-medium tracking-normal text-center">Submit</button>

                    </div>
                </div>
            </form>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal ends here -->


<app-chat-room></app-chat-room>